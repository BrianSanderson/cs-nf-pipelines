// Copyright Jackson Laboratory 2021

// Config file that won't be edited by individual users and will remain constant; contains parameters such as containers to use/walltime/memory

//====================  Nextflow/Container Config  ==========

manifest {
    name = "wes"
    description = 'Pipeline for Processing Whole Exome Samples'
    author = 'Anuj Srivastava, Carolyn Paisie, Barry Guglielmo Copyright Jackson Laboratory 2021'
    version = "2.0.0"
}

// Default to Mouse, If gen_org == 'human' See Decision Block After params
params {
  //Shared params
  gen_org = 'mouse' // human
  extension='.fastq.gz'
  pattern="*_R{1,2}*"
  read_type = 'PE' // SE
  sample_folder="/projects/compsci/guglib/tmp_pipeline_defaults/wes_truncated_sequences/pe"

  // reference fasta
  ref_fa = '/projects/omics_share/mouse/GRCm38/genome/sequence/ensembl/v102/Mus_musculus.GRCm38.dna.toplevel.fa'
  ref_fa_indices='/projects/omics_share/mouse/GRCm38/genome/indices/bwa/Mus_musculus.GRCm38.dna.toplevel.fa'
  //Quality Stats params
  filter_trim = "${projectDir}/bin/shared/filter_trim.py"
  min_pct_hq_reads = '0.0'

  //Read Groups
  read_group_pyfile = "${projectDir}/bin/shared/read_group_from_fastq.py"

  dbSNP = '/projects/compsci/refdata/Mouse/mm10/Annotation_Files/dbSNP/dbSNP.mm10.vcf.gz'
  target_gatk = '/projects/omics_share/mouse/GRCm38/supporting_files/mm10Exome_v4_12-19.1.mm10.baits_merged.bed'
  target_picard = '/projects/omics_share/mouse/GRCm38/supporting_files/mm10Exome_v4_12-19.1.mm10.targets_merged_picard_new.bed'
  bait_picard = '/projects/omics_share/mouse/GRCm38/supporting_files/mm10Exome_v4_12-19.1.mm10.baits_merged_picard_new.bed'

  snpEff_config = "/projects/omics_share/mouse/GRCm38/genome/indices/snpEff_5_1_GRCm38_v99/snpEff.config"
  stats_agg = "${projectDir}/bin/wes/aggregate_stats_wes.py"
  mismatch_penalty = "-B 8"
  call_val = "50.0"
  ploidy_val = ""

}

// Defaults for Human (Default HG38 PE) Should we have a switch for other versions?
if (params.gen_org=='human'){
  params.gen_ver = "hg38"
  params.ref_fa = '/projects/omics_share/human/GRCh38/genome/sequence/ensembl/v104/Homo_sapiens.GRCh38.dna.toplevel.fa'
  params.ref_fa_indices = '/projects/omics_share/human/GRCh38/genome/indicies/bwa/Homo_sapiens.GRCh38.dna.toplevel.fa'
  // These gold standard snp & indel files are bgzipped and tabixed, but old versions were not. Is this an issue?
  params.gold_std_indels = '/projects/omics_share/human/GRCh38/genome/annotation/snps_indels/Mills_and_1000G_gold_standard.indels.hg38.vcf.gz'
  params.phase1_1000G = '/projects/omics_share/human/GRCh38/genome/annotation/snps_indels/1000G_phase1.snps.high_confidence.hg38.vcf.gz'
  params.dbSNP = '/projects/omics_share/human/GRCh38/genome/annotation/snps_indels/GCF_000001405.39.gz'
  params.target_gatk = '/projects/omics_share/human/GRCh38/supporting_files/hg38_liftover_agilent_SureSelect_V4_pChrM_probes.bed'
  params.target_picard = '/projects/omics_share/human/GRCh38/supporting_files/hg38_agilent_SureSelect_V4_pChrM_probes_picard_updated.bed'
  params.bait_picard = '/projects/omics_share/human/GRCh38/supporting_files/hg38_agilent_SureSelect_V4_pChrM_probes_picard_updated.bed'
  params.dbNSFP='/projects/omics_share/human/GRCh38/genome/annotation/function/dbNSFP4.2a.txt.gz'
  params.cosmic = '/projects/omics_share/human/GRCh38/genome/annotation/function/COSMICv95_Coding_Noncoding.vcf'
  // this param was previously '/projects/compsci/refdata/Human/hg38/snpEff_files/data/hg38'
  params.hgvs_data = '/projects/omics_share/human/GRCh38/genome/indices/snpEff_5_1_GRCh38_v99'
  params.cosmic_annot = "${projectDir}/bin/shared/Cosmic_Annotation_hg38.pl"
  params.snpEff_config = '/projects/omics_share/human/GRCh38/genome/indices/snpEff_5_1_GRCh38_v99/snpEff.config'
  params.mismatch_penalty = "-B 8"
  params.call_val = "50.0"
  params.ploidy_val = "-ploidy 4"
}

trace {
    enabled = true // false
    file = "${params.pubdir}/trace.txt"
    fields = \
         "task_id,"   \
       + "hash,"      \
       + "process,"   \
       + "tag,"       \
       + "status,"    \
       + "exit,"      \
       + "start,"     \
       + "container," \
       + "cpus,"      \
       + "time,"      \
       + "disk,"      \
       + "memory,"    \
       + "duration,"  \
       + "realtime,"  \
       + "queue,"     \
       + "%cpu,"      \
       + "%mem,"      \
       + "rss,"       \
       + "vmem,"      \
       + "rchar,"     \
       + "wchar"
}
