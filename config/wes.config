// Copyright Jackson Laboratory 2021

// Config file that won't be edited by individual users and will remain constant; contains parameters such as containers to use/walltime/memory

//====================  Nextflow/Container Config  ==========

manifest {
    name = "wes"
    description = 'Pipeline for Processing Whole Exome Samples'
    author = 'Anuj Srivastava, Carolyn Paisie, Barry Guglielmo Copyright Jackson Laboratory 2021'
    version = "2.0.0"
}

params {

  //Shared params
  gen_org = 'mouse' // human
  extension='.fastq.gz'
  read_type = 'PE' // SE
  fq_path="/projects/compsci/guglib/tmp_pipeline_defaults/rna_truncated_sequences/pe"
  ref_fa = '/projects/compsci/refdata/Mouse/mm10/Index_Files/BWA/mm10.fa'

  //Quality Stats params
  filter_trim = "${params.cwd}/bin/shared/filter_trim.py"
  min_pct_hq_reads = '0.0'

  //Read Groups
  read_grp_det = "${params.cwd}/bin/shared/read_group_from_fastq.py"

  dbSNP = '/projects/compsci/refdata/Mouse/mm10/Annotation_Files/dbSNP/dbSNP.mm10.tab.gz'
  target_gatk = '/projects/compsci/refdata/Mouse/mm10/mm10Exome_v4_12-19.1.mm10.baits_merged.bed'
  target_picard = '/projects/compsci/refdata/Mouse/mm10/mm10Exome_v4_12-19.1.mm10.targets_merged_picard_new.bed'
  bait_picard = '/projects/compsci/refdata/Mouse/mm10/mm10Exome_v4_12-19.1.mm10.baits_merged_picard_new.bed'

// IMPORTANT: snpEff.config needs to be in directory one level above data directory containing snpEff database files!!!!
  snpEff_config = '/projects/compsci/refdata/Mouse/mm10/snpEff_files/snpEff.config'
  stats_agg = '${params.cwd}/bin/wes/aggregate_stats.py'
  mismatch_penalty = "8"
  call_val = "50.0"
  ploidy_val = ""
}

trace {
    enabled = true // false
    file = "${params.outdir}/trace.txt"
    fields = \
         "task_id,"   \
       + "hash,"      \
       + "process,"   \
       + "tag,"       \
       + "status,"    \
       + "exit,"      \
       + "start,"     \
       + "container," \
       + "cpus,"      \
       + "time,"      \
       + "disk,"      \
       + "memory,"    \
       + "duration,"  \
       + "realtime,"  \
       + "queue,"     \
       + "%cpu,"      \
       + "%mem,"      \
       + "rss,"       \
       + "vmem,"      \
       + "rchar,"     \
       + "wchar"
}



/*
some old lines that may help
FILE_LIST_R1=`ls ${FQ_PATH}/*_R1*.fastq.gz > r1.txt`
FILE_LIST_R2=`ls ${FQ_PATH}/*_R2*.fastq.gz > r2.txt`
    R1=$(head -n $i r1.txt | tail -n 1)
    base=$(basename $R1 .fastq.gz)
    sbatch --export=ALL,pc_name=$base ./run_mm10_WholeExome.sh
*/
